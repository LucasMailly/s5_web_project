{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}

{% block body %}

    {# search bar #}
    <form action="{{ path('app_home') }}" method="get">
        <p>
        <select name="category">
        <option value="Tout">Tout</option>
        <option value="Vetement">Vêtement</option>
        <option value="Voiture">Voiture</option>
        <option value="Jardinage">Jardinage</option>
        <option value="Materiaux">Matériaux</option>
        <option value="Mobilier">Mobilier</option>
        </select>

        <input type="text" name="search" placeholder="Rechercher" value="{{ search }}">

        <input name="priceMin" type="text" placeholder="Prix minimum"/>
        <input name="priceMax" type="text" placeholder="Prix maximum"/>

        <input type="date" name="dateParution" min="2018-01-01" max="2100-12-31">
        Occasion:
        <input type="radio" id="yes" name="used" value="1">
        <label for="yes">Oui</label>
        <input type="radio" id="no" name="used" value="0">
        <label for="no">Non</label>

        <button type="submit">Search</button>
        </p>
    </form>

    <h1>Résultats pour : {{ search }}</h1>

    {# display results #}
    {% for article in articles %}
        <img src="{{ asset(article_images_path ~ '/' ~ (article.imgArticle ? article.imgArticle : 'default.jpg')) }}" width="100px" height="100px">
        <h5 >{{ article.title }}</h5>
        <h5>{{ article.price }} €</h5>
    {% else %}
        <p>Aucun résultat.</p>
    {% endfor %}

    {# pagination #}
    <div>
        {% if page > 1 %}
            <a href="{{ path('app_home', {search: search, page: page - 1}) }}">Page précédente</a>
        {% endif %}

        {{ page }}

        {% if page < nbPages %}
            <a href="{{ path('app_home', {search: search, page: page + 1}) }}">Page suivante</a>
        {% endif %}
    </div>

{% endblock %}
